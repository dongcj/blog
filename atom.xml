<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Krrish</title>
  
  <subtitle>Premature optimization is the root of all evil.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.dongcj.com/"/>
  <updated>2018-07-11T06:42:47.522Z</updated>
  <id>http://blog.dongcj.com/</id>
  
  <author>
    <name>Krrish</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://blog.dongcj.com/m/Parted%E3%80%81kpartx%E3%80%81losetup%E3%80%81sfdisk%E3%80%81e2fsck%E3%80%81resize2fs%E5%88%86%E5%8C%BA%E6%89%A9%E7%9B%98/"/>
    <id>http://blog.dongcj.com/m/Parted、kpartx、losetup、sfdisk、e2fsck、resize2fs分区扩盘/</id>
    <published>2018-03-07T07:48:59.511Z</published>
    <updated>2018-07-11T06:42:47.522Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;linux- 根分区修改为 -lvm&quot;&gt;1. linux 根分区修改为 lvm&lt;/h1&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;First Create an LVM partition: &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pvcreate /dev/sdb1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vgcreate vg01  /dev/sdb1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lvcreate -L 100%VG -n lv01 vg01&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Format this new LVM partition with ext3 or ext4 &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkfs.ext4 /dev/vg01/lv01&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Create a new mount point and then mount the LVM Partition on it &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir /mnt/NEW_ROOT_PARTITION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mount /dev/vg01/lv01  /mnt/NEW_ROOT_PARTITION&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Copy all contents of “/” to the newly mounted folder &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tar -cvpf - --one-file-system --acls --xattrs --selinux / | tar -C /mnt/NEW_ROOT_PARTITION -x&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp -aux /dev /mnt/NEW_ROOT_PARTITION&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;edit the file – /mnt/NEW_ROOT_PARTITION/etc/fstab to reflect the new root &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/dev/vg01/lv01      /       ext4    defaults     1 1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;chroot to new filesystem and create initrd with raid and lvm support &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mount --&lt;span class=&quot;built_in&quot;&gt;bind&lt;/span&gt; /dev /mnt/NEW_ROOT_PARTITION/dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chroot /mnt/NEW_ROOT_PARTITION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mount -t proc /proc /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mount -t sysfs /sys /sys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vgscan&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vgchange -ay&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;umount /sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;umount /proc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv /mnt/lv0/boot/initrd-`uname -r`.lvm.img /boot&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&quot;7&quot; type=&quot;1&quot;&gt;
&lt;li&gt;&lt;p&gt;Edit /boot/grub/grub.conf to point to new root /dev/vg_new_root/lv0 &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;update-grub&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;grub-set-default&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Reboot &lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;reboot&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;虚拟机增加系统盘根分区大小&quot;&gt;2. 虚拟机增加系统盘根分区大小 &lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt; 注意：镜像如果是 qcow2 格式，请先转换为 raw 格式 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 此方法适用于分区后连接的空间 , 如果是 swap, 将其删除，并在最末尾建 swap )&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 先增加实例文件大小，例如可以使用 dd 命令 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dd &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;=/dev/zero of=/tmp/temp_expand bs=1M count=4096（增加 4 GB）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /tmp/temp_expand &amp;gt;&amp;gt;/var/lib/libvirt/images/my_vm.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 或者使用 qemu-img 命令进行大小调整 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qemu-img resize  my_vm.img +100G&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 挂载文件至系统，以便找出是否有 swap device&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kpartx -a -p p /var/lib/libvirt/images/my_vm.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 刷新下分区 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;partprobe /dev/loop0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# If has swap device, del the swap device&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;swapDevice=`sfdisk -s -l /dev/loop0 | grep -e &lt;span class=&quot;string&quot;&gt;&#39;Linux swap&#39;&lt;/span&gt; |awk &lt;span class=&quot;string&quot;&gt;&#39;&amp;#123;print $1&amp;#125;&#39;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Del swap&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parted -s &lt;span class=&quot;variable&quot;&gt;$&amp;#123;loop&amp;#125;&lt;/span&gt; rm &lt;span class=&quot;variable&quot;&gt;$&amp;#123;swap_part_num&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# If does&#39;t have, add the new swap device&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parted -s /dev/loop1 &lt;span class=&quot;string&quot;&gt;&quot;unit mb mkpart primary linux-swap -2048MB -0&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 或者先只划分空间，再用 mkswap 进行操作 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 可选的：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkswap -v1 /dev/mapper/loop1p3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 重新刷新新增加的 swap 设备 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kpartx -d -p p /var/lib/libvirt/images/my_vm.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kpartx -a -p p /var/lib/libvirt/images/my_vm.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 将新的 lo 设备分区进行打印 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sfdisk -d /dev/loop0 &amp;gt;/tmp/sfdisk_dump&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果有 swap 分区，则 root 分区为 (root start), (swap start - root start)；如果没有 , 则为&quot;(root start),&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;new_root=&lt;span class=&quot;string&quot;&gt;&quot;401625,14227239&quot;&lt;/span&gt;		&lt;span class=&quot;comment&quot;&gt;# (样例, 根据实际情况修改)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;converted_root_device=`&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;/dev/loop0p1&quot;&lt;/span&gt; | sed -e &lt;span class=&quot;string&quot;&gt;&#39;s/\//\\\\\//g&#39;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -e &lt;span class=&quot;string&quot;&gt;&quot;s/^&lt;span class=&quot;variable&quot;&gt;$&amp;#123;converted_root_device&amp;#125;&lt;/span&gt;.*$/&lt;span class=&quot;variable&quot;&gt;$new_root&lt;/span&gt;/&quot;&lt;/span&gt; /tmp/sfdisk_dump | sfdisk --no-reread --force /dev/loop0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# FS resize&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;e2fsck -pv /dev/mapper/loop0p1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;resize2fs -f /dev/mapper/loop0p1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# umount 分区 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kpartx -d -p p /var/lib/libvirt/images/my_vm.img&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;losetup -d /dev/loop0&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;parted- 使用&quot;&gt;3. parted 使用 &lt;/h1&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 4. create all 100% space to one part&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ parted -s /dev/sdb mklabel gpt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 5. -a means &quot;align mode&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ parted -a optimal -s /dev/sdb &lt;span class=&quot;string&quot;&gt;&quot;mkpart image-disk 0% 100%&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 6. create other part&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parted -a optimal -s /dev/sdb &lt;span class=&quot;string&quot;&gt;&quot;mkpart logical 59G 459G&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parted -a optimal -s /dev/sdb &lt;span class=&quot;string&quot;&gt;&quot;mkpart logical 459G 859G&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 7. remove part&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parted -s /dev/sdb rm 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;parted -s /dev/sdb rm 3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>修改 Npm 安装源为国内源</title>
    <link href="http://blog.dongcj.com/m/%E4%BF%AE%E6%94%B9npm%E5%AE%89%E8%A3%85%E6%BA%90%E4%B8%BA%E5%9B%BD%E5%86%85%E6%BA%90/"/>
    <id>http://blog.dongcj.com/m/修改npm安装源为国内源/</id>
    <published>2018-03-06T01:54:44.017Z</published>
    <updated>2018-03-06T01:54:44.018Z</updated>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; 淘宝源地址：&lt;a href=&quot;http://npm.taobao.org/&quot; class=&quot;uri&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://npm.taobao.org/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;删除已有 -npm- 包 - 可选&quot;&gt; 删除已有 npm 包 (可选)&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看已安装的 npm package&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm -g ls        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## 删除所有 npm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm ls -gp | awk -F/ &lt;span class=&quot;string&quot;&gt;&#39;/node_modules/ &amp;amp;&amp;amp; !/node_modules.*node_modules/ &amp;#123;print $NF&amp;#125;&#39;&lt;/span&gt; | xargs npm -g rm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;npm ls -g 如果报错，可以进行以下处理 :&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# （原因是 node-modules 中不允许用软链接，但 inherits 却用了）：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm ERR! missing: inherits@*, required by undefined@undefined&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm ERR! missing: inherits@*, required by block-stream@0.0.7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm ERR! missing: inherits@*, required by fstream@0.1.24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/lib/node_modules/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unlink inherit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mv inherits@2/ inherits/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm update npm -g &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; registry=https://registry.npm.taobao.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm config &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; ca &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install npm -g &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt; registry=https://registry.npm.taobao.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm config delete ca&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;或者做个 -cnpm- 的 -alias&quot;&gt; 或者做个 cnpm 的 alias&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# install cnpm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install -g cnpm --registry=https://registry.npm.taobao.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# make alias&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;alias&lt;/span&gt; cnpm=&lt;span class=&quot;string&quot;&gt;&quot;npm --registry=https://registry.npm.taobao.org \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--cache=&lt;span class=&quot;variable&quot;&gt;$HOME&lt;/span&gt;/.npm/.cache/cnpm \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--disturl=https://npm.taobao.org/dist \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;--userconfig=&lt;span class=&quot;variable&quot;&gt;$HOME&lt;/span&gt;/.cnpmrc&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Or alias it in .bashrc or .zshrc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;\n#alias for cnpm\nalias cnpm=&quot;npm --registry=https://registry.npm.taobao.org \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  --cache=$HOME/.npm/.cache/cnpm \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  --disturl=https://npm.taobao.org/dist \&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  --userconfig=$HOME/.cnpmrc&quot;&#39;&lt;/span&gt; &amp;gt;&amp;gt; ~/.zshrc &amp;amp;&amp;amp; &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt; ~/.zshrc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# install module / sync / info&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cnpm install &amp;lt;NAME&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cnpm sync connect&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cnpm info connect&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://blog.dongcj.com/m/%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/"/>
    <id>http://blog.dongcj.com/m/常用监控工具/</id>
    <published>2018-03-06T01:54:39.893Z</published>
    <updated>2018-08-03T10:23:20.170Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;常用工具&quot;&gt;1. 常用工具&lt;/h1&gt;
&lt;h2 id=&quot;basic&quot;&gt;1.1. Basic&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Process &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ps -eLf               &lt;span class=&quot;comment&quot;&gt;# 打印线程&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ps -ef f              &lt;span class=&quot;comment&quot;&gt;# 打印进程树&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pstree -al[pha] [PID] &lt;span class=&quot;comment&quot;&gt;# 查看某进程的详细情况&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Load&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;top | uptime | sar -q 2 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# CPU&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -u [-P 0] 1 20 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mpstat [-P 0] 1 20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Mem&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -r 2 10 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vmstat 1 20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;free &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vmtouch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsmem&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Disk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;iostat -m  1 20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -d 1 20 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# FS Inode&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -F 2 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -v 2 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Swap&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sar -W 2 10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;details&gt; &lt;summary&gt;ps 字段说明&lt;/summary&gt;&lt;/details&gt;&lt;/p&gt;
&lt;p&gt;可以用 &lt;code&gt;ps -a -uroot -o pid,ppid,stat,command&lt;/code&gt; 根据 Flag 来判断&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;F(Flag)：一系列数字的和，表示进程的当前状态。这些数字的含义为： &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;00：若单独显示，表示此进程已被终止。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;01：进程是核心进程的一部分，常驻于系统主存。如：　　　 sched、 vhand 、bdflush 等。 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;02：Parent is tracing process. &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;04 ：Tracing parent&amp;apos;s signal has stopped the process; the parent　is waiting (ptrace(S)). &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10：进程在优先级低于或等于 25 时，进入休眠状态，而且不能用信号唤醒，例如在等待一个 inode 被创建时　　　 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20：进程被装入主存（primary memory） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40：进程被锁在主存，在事务完成前不能被置换　　　e &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S(state of? the process) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;O：进程正在处理器运行　 ms 这个状态从来木见过， 倒是 R 常见 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S：休眠状态（sleeping） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;R：等待运行（runable）　　　 R Running or runnable (on run queue) 进程处于运行或就绪状态&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I：空闲状态（idle） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Z：僵尸状态（zombie）　　　 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;T：跟踪状态（Traced） &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;B：进程正在等待更多的内存页 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;D: 不可中断的深度睡眠，一般由 IO 引起，同步 IO 在做读或写操作时，cpu 不能做其它事情，只能等待，这时进程处于这种状态，如果程序采用异步 IO，这种状态应该就很少见到了&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;C(cpu usage)：cpu 利用率的估算值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;high-priority (not nice to other users)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;N    low-priority (nice to other users)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;L    has pages locked into memory (for real-time and custom IO)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;s    is a session leader&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;l    is multi-threaded (using CLONE_THREAD, like NPTL pthreads do)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+    is in the foreground process group&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 2. 清除 ZOMBIE（僵尸）进程可以使用如下方法：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&amp;gt; kill – 18 PPID （PPID 是其父进程）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 这个信号是告诉父进程，该子进程已经死亡了，请收回分配给他的资源。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2 &amp;gt; 如果不行则看能否终止其父进程（如果其父进程不需要的话）。先看其父进程又无其他子进程，如果有，可能需要先 kill 其他子进程，也就是兄弟进程。方法是：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kill – 15 PID1 PID2(PID1,PID2 是僵尸进程的父进程的其它子进程)。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;然后再 kill 父进程：kill – 15 PPID  这样僵尸进程就可能被完全杀掉了。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;details&gt; &lt;summary&gt;free 字段说明&lt;/summary&gt;&lt;/details&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ free&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;total       used    free    shared  buffers     cached&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Mem:    255268      238332  16936   0       85540       126384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-/+ buffers/cache:  26408   228860&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;free2：未被使用的 buffers 与 cache 和未被分配的内存之和，这就是系统当前实际可用内存。 total1 = used1 + free1 total1 = used2 + free2 used1 = buffers1 + cached1 + used2 free2 = buffers1 + cached1 + free1&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;buffer: 缓冲区 缓冲区，一个用于存储速度不同步的设备或优先级不同的设备之间传输数据的区域。通过缓冲区，可以使进程之间的相互等待变少，从而使从速度慢的设备读入数据时，速度快的设备的操作进程不发生间断。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;cache: 高速缓存 高速缓存，是位于 CPU 与主内存间的一种容量较小但速度很高的存储器。由于 CPU 的速度远高于主内存，CPU 直接从内存中存取数据要等待一定时间周期，Cache 中保存着 CPU 刚用过或循环使用的一部分数据，当 CPU 再次使用该部分数据时可从 Cache 中直接调用 , 这样就减少了 CPU 的等待时间 , 提高了系统的效率。Cache 又分为一级 Cache(L1 Cache) 和二级 Cache(L2 Cache)，L1 Cache 集成在 CPU 内部，L2 Cache 早期一般是焊在主板上 , 现在也都集成在 CPU 内部，常见的容量有 256KB 或 512KB L2 Cache。&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SSH_config_proxycommand</title>
    <link href="http://blog.dongcj.com/m/SSH_config_proxycommand/"/>
    <id>http://blog.dongcj.com/m/SSH_config_proxycommand/</id>
    <published>2018-03-06T01:54:32.336Z</published>
    <updated>2018-03-07T08:01:36.790Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;proxycommand&quot;&gt;1. ProxyCommand&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 直接跳到远程计算机 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh -o &lt;span class=&quot;string&quot;&gt;&quot;ProxyCommand ssh -p 1098 lmx@proxy.machine nc -w 1 %h %p&quot;&lt;/span&gt; -p 1098 lmx@target.machine&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 拷贝文件到远程计算机 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scp -o &lt;span class=&quot;string&quot;&gt;&quot;ProxyCommand ssh -p 1098 lmx@proxy.machine nc -w 1 %h %p&quot;&lt;/span&gt; -P 1098 -r lmx@target.machine:~/rdsAgent .&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 在远程计算机执行命令 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ssh -o &lt;span class=&quot;string&quot;&gt;&quot;ProxyCommand ssh -p 1098 lmx@proxy.machine nc -w 1 %h %p&quot;&lt;/span&gt; -p 1098 lmx@target.machine &lt;span class=&quot;string&quot;&gt;&#39;ip a&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;ssh-config-file-example&quot;&gt;2. ssh config file example&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ cat ~/.ssh/config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ForwardAgent yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ForwardX11 no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;KeepAlive yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ServerAliveInterval 30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CheckHostIP no&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ControlMaster auto&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ControlPath /tmp/ssh_mux_%h_%p_%r&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# client --&amp;gt; 203.195.207.108:46707 --&amp;gt; 118.193.254.66:22&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Host hk-jumpserver&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;User root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;IdentityFile /cygdrive/c/Users/root/id_rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ProxyCommand ssh -i /cygdrive/c/Users/root/id_rsa root@203.195.207.108 -p 46707 nc 118.193.254.66 22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://blog.dongcj.com/m/Docker%E5%AE%89%E8%A3%85%E5%8F%8A%E5%91%BD%E4%BB%A4/"/>
    <id>http://blog.dongcj.com/m/Docker安装及命令/</id>
    <published>2018-03-06T01:54:08.513Z</published>
    <updated>2018-08-03T08:37:54.947Z</updated>
    
    <summary type="html">
    
      弱网环境为了支持 bbr、aufs，建议安装 linux-image-extra 内核, 参考：Linux 升级 kernel 及 tcp_BBR

1. 准备步骤
1.1. 如果有些需要特权应用
1
2


systemctl stop apparmor
systemctl disable apparmor


1.2. 服务器时间同步
如果不配置时间同步，可能会导致调度服务有可能不正常 , 建议使用 UTC 时间 1
2
3


# 直接删除 /etc/localtime 即可使用 UTC 时间
date
rm -rf /etc/localtime




1.3. 支持 BBR，请升级内
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Rancher 安装</title>
    <link href="http://blog.dongcj.com/docker/Rancher%E5%AE%89%E8%A3%85/"/>
    <id>http://blog.dongcj.com/docker/Rancher安装/</id>
    <published>2017-12-24T07:43:19.000Z</published>
    <updated>2017-12-24T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;安装 -rancher&quot;&gt;1. 安装 Rancher&lt;/h1&gt;
&lt;h2 id=&quot;单机安装 -v.16&quot;&gt;1.1. 单机安装 v.16&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 下载 rancher/server 镜像 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker pull rancher/server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 单实例启动 (使用默认自带的数据库)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker run -d --restart=always \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-v /opt/svicloud/rancher/server_db:/var/lib/mysql \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--name rancher-server \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-p 8080:8080 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rancher/server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 单独数据库启动 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker run -d --restart=always -p 8080:8080 -p 9345:9345 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--name rancher-server \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rancher/server  \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--db-host  mysql-lb.mysql.dongcj.krrish.top  \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--db-port 3306  \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--db-user root  \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--db-pass mogK****  \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--db-name cattle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 然后，浏览器打开 http://&amp;lt;SERVER_IP&amp;gt;:8080 即可 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;单机安装 -v.2.x&quot;&gt;1.2. 单机安装 v.2.x&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 下载 rancher/rancher 镜像 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker pull rancher/rancher&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 单实例启动 (使用默认自带的数据库)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker run -d --restart=always \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--name rancher-server \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-p 80:80 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-p 443:443 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rancher/rancher&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 然后，浏览器打开 http://&amp;lt;SERVER_IP&amp;gt; 即可 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;其它安装选项&quot;&gt;2. 其它安装选项 &lt;/h1&gt;
&lt;h2 id=&quot;ha- 模式安装可选&quot;&gt;2.1. HA 模式安装（可选）&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt; 安装一个外部 &lt;strong&gt; 主从模式 &lt;/strong&gt; 的 MySQL&lt;/li&gt;
&lt;li&gt; 在主备两边执行 &lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;docker run -d --restart=always -p 8080:8080 -p 9345:9345 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --name rancher-server rancher/server \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --db-host myhost.example.com \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --db-port 3306 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --db-user username \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --db-pass password \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --db-name cattle \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --advertise-address &amp;lt;IP_of_the_Node&amp;gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.cattle.database=mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.cattle.username=cattle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.cattle.password=cattle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.cattle.mysql.host=localhost&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.cattle.mysql.port=3306&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.cattle.mysql.name=cattle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# All values above are the defaults except db.cattle.database. If the defaults are fine, then all you need to set is db.cattle.database=mysql.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;启动集群模式可选&quot;&gt;2.2. 启动集群模式（可选）&lt;/h2&gt;
    
    </summary>
    
      <category term="docker" scheme="http://blog.dongcj.com/categories/docker/"/>
    
    
      <category term="rancher" scheme="http://blog.dongcj.com/tags/rancher/"/>
    
      <category term="docker" scheme="http://blog.dongcj.com/tags/docker/"/>
    
      <category term="caas" scheme="http://blog.dongcj.com/tags/caas/"/>
    
  </entry>
  
  <entry>
    <title>常用命令</title>
    <link href="http://blog.dongcj.com/linux/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://blog.dongcj.com/linux/常用命令/</id>
    <published>2017-12-04T00:50:10.000Z</published>
    <updated>2017-12-04T08:45:47.000Z</updated>
    
    <summary type="html">
    
      &lt;pre&gt;&lt;code&gt;[+] 新增
[-] 删除
[^] 升级
[#] 修复 &lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;高亮 -tail--f- 搜索&quot;&gt;1. 高亮 tail -f 搜索 &lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;less xxx.log&lt;/li&gt;
&lt;li&gt; 搜索你要高亮的关键字 &lt;/li&gt;
&lt;li&gt;SHIFT+F，进入 follow 模式 &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;pkill&quot;&gt;2. pkill&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pkill -f -SIGUSR1 /app/letsencrypt_service || pkill -USR1 -f /app/letsencrypt_service&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;windows&quot;&gt;3. Windows&lt;/h1&gt;
&lt;h2 id=&quot;windows-mount- 网络共享为一个文件夹&quot;&gt;3.1. Windows mount 网络共享为一个文件夹 &lt;/h2&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;net use \\192.168.11.111\public\data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mklink /d d:\ccc \\192.168.11.111\public\data&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;windows- 网络设置&quot;&gt;3.2. Windows 网络设置 &lt;/h2&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ipconfig | findstr /c:&amp;quot;IPv4&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sed -i -e &amp;quot;s/$/\x0d/g&amp;quot; $&amp;#123;MountPoint&amp;#125;/temp/postAfter.d/m01.configureNetworkInterfaces.bat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;netsh interface ip show interfaces &amp;quot; 本地连接 &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="command" scheme="http://blog.dongcj.com/tags/command/"/>
    
  </entry>
  
  <entry>
    <title>Harbor 支持 Https</title>
    <link href="http://blog.dongcj.com/m/Harbor%E5%AE%89%E8%A3%85/"/>
    <id>http://blog.dongcj.com/m/Harbor安装/</id>
    <published>2017-06-04T05:13:32.206Z</published>
    <updated>2018-08-05T03:33:33.782Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;install&quot;&gt;1. Install&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;根据实际情况修改 harbor.cfg&lt;/li&gt;
&lt;li&gt;新建目录并将证书 &lt;code&gt;server.crt&lt;/code&gt; 和 &lt;code&gt;server.key&lt;/code&gt; 放置于目录&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p /data/cert/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;运行 ./install.sh&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;watchdog&quot;&gt;2. watchdog&lt;/h1&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p /etc/scripts/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 见 harbor_watchdog.sh 脚本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/scripts/harbor_watchdog.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 可执行权限&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod a+x /etc/scripts/harbor_watchdog.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;crontab -e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/45 * * * * /etc/scripts/harbor_watchdog.sh &amp;gt;&amp;gt; /var/&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;/harbor_watchdog.log 2&amp;gt;&amp;amp;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;harbor- 同步设置&quot;&gt;3. harbor 同步设置&lt;/h1&gt;
&lt;h2 id=&quot;方案&quot;&gt;3.1. 方案&lt;/h2&gt;
&lt;p&gt;CS (registry.svicloud.com) — 全同步 —&amp;gt; SZ (ci.svicloud.com) — 部分同步 —&amp;gt; FR (registry.svicloud.com)&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Rfw-RemoteFirewall 远程管理防火墙</title>
    <link href="http://blog.dongcj.com/linux/security/Rfw-RemoteFirewall%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86%E9%98%B2%E7%81%AB%E5%A2%99/"/>
    <id>http://blog.dongcj.com/linux/security/Rfw-RemoteFirewall远程管理防火墙/</id>
    <published>2017-04-11T03:43:19.000Z</published>
    <updated>2017-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;install&quot;&gt;install&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; client: curl client (eg: 116.23.45.8)
&amp;gt; server: rfw servers (default port: 7393)&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;install-rfw-on-all-serveron-client-server&quot;&gt;install rfw on ALL server(on client &amp;amp; server)&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ git clone https://github.com/securitykiss-com/rfw.git
$ cd rfw &amp;amp;&amp;amp; python setup.py install&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;generate-remote-crton-client&quot;&gt;generate remote crt(on client)&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ cd /etc/rfw/deploy/
$ rfwgen  11.11.11.11
$ rfwgen  22.22.22.22

# will generate the follow files
.
├── client
│   └── ca.crt
├── offline
│   └── ca.key
├── server_11.11.11.11
│   ├── server.crt
│   └── server.key
└── server_22.22.22.22
  ├── server.crt
  └── server.key&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;copy-key-to-server&quot;&gt;copy key to server&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# on master server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scp /etc/rfw/deploy/server_11.11.11.11/server.key root@11.11.11.11:/etc/rfw/ssl/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scp /etc/rfw/deploy/server_11.11.11.11/server.crt root@11.11.11.11:/etc/rfw/ssl/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scp /etc/rfw/deploy/server_22.22.22.22/server.key root@22.22.22.22:/etc/rfw/ssl/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;scp /etc/rfw/deploy/server_22.22.22.22/server.crt root@22.22.22.22:/etc/rfw/ssl/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;edit-the-server-config&quot;&gt;edit the server config&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ vi /etc/rfw/rfw.conf
outward.server.certfile = /etc/rfw/ssl/server.crt
outward.server.keyfile = /etc/rfw/ssl/server.key
auth.username = your_username_here
auth.password = your_password_here

$ vi /etc/rfw/white.list
116.23.45.8&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
      <category term="security" scheme="http://blog.dongcj.com/categories/linux/security/"/>
    
    
      <category term="rfw" scheme="http://blog.dongcj.com/tags/rfw/"/>
    
      <category term="RemoteFirewall" scheme="http://blog.dongcj.com/tags/RemoteFirewall/"/>
    
  </entry>
  
  <entry>
    <title>Python2.6 升级至 python2.7</title>
    <link href="http://blog.dongcj.com/linux/Python2.6%E5%8D%87%E7%BA%A7%E8%87%B3python2.7/"/>
    <id>http://blog.dongcj.com/linux/Python2.6升级至python2.7/</id>
    <published>2016-11-28T09:44:33.000Z</published>
    <updated>2017-08-09T01:03:50.000Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;升级 -python&quot;&gt; 升级 python&lt;/h1&gt;
&lt;h2 id=&quot;install&quot;&gt;install&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;# 一定要先安装 zlib zlib-devel openssl openssl-devel，ncurses-devel，不然安装好后没有 zlib, 和 HTTPlib
$ yum -y install zlib-devel openssl-devel ncurses-devel libxml2-devel&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;如果要安装 -mysql-python 需要安装以下软件&quot;&gt; 如果要安装 MySQL-python，需要安装以下软件 &lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ yum -y install mysql mysql-devel&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;如果要安装 -lxml 需要安装以下软件&quot;&gt; 如果要安装 lxml，需要安装以下软件 &lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ yum -y install libxml2-devel  libxslt-devel&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;编译安装 -python- 新版&quot;&gt; 编译安装 python 新版 &lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;$ wget http://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz

# 加上 --enable-shared 解决 &amp;quot;Cannot build PL/Python because libpython is not a shared library&amp;quot;
$ tar -xzf Python-2.7.13.tgz &amp;amp;&amp;amp; cd Python-2.7.13 &amp;amp;&amp;amp; ./configure  --enable-shared
$ make all &amp;amp;&amp;amp; make install &amp;amp;&amp;amp; make clean &amp;amp;&amp;amp; make distclean

$ echo &amp;quot;/usr/local/lib&amp;quot; &amp;gt;&amp;gt;/etc/ld.so.conf
$ ldconfig
$ mv /usr/bin/python /usr/bin/python2.6.bak
$ ln -s /usr/local/bin/python /usr/bin/python

# copy bz2 module
$ yes | cp -rLfap /usr/lib64/python2.*/lib-dynload/bz2.so /usr/local/lib/python2.*/
$ python -V&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;安装 -easy_install- 和 -pip&quot;&gt; 安装 easy_install 和 pip&lt;/h1&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="python 升级" scheme="http://blog.dongcj.com/tags/python-%E5%8D%87%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>SMATE、XFCE、VNC 配置</title>
    <link href="http://blog.dongcj.com/linux/SMATE%E3%80%81XFCE%E3%80%81VNC%E9%85%8D%E7%BD%AE/"/>
    <id>http://blog.dongcj.com/linux/SMATE、XFCE、VNC配置/</id>
    <published>2016-08-30T09:27:43.000Z</published>
    <updated>2016-08-30T09:48:08.000Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;centos-yum- 安装图像界面&quot;&gt;1. CentOS yum 安装图像界面 &lt;/h1&gt;
&lt;p&gt;(参考：http://www.ha97.com/4634.html)&lt;/p&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install epel-release&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum grouplist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum groupinstall &lt;span class=&quot;string&quot;&gt;&quot;GNOME Desktop Environment&quot;&lt;/span&gt;（CentOS 5.x 安装 GNOME 桌面环境）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum groupinstall &lt;span class=&quot;string&quot;&gt;&quot;X Window System&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Desktop&quot;&lt;/span&gt;（CentOS 6.x 安装 GNOME 桌面环境）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum groupinstall [xfce | &lt;span class=&quot;string&quot;&gt;&quot;MATE Desktop&quot;&lt;/span&gt; ]（CentOS 安装 xfce 桌面环境，可选）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看 runlevel&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl get-default || runlevel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# to runlevel 5(to change runlevel 3, change to `multi-user.target`)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl isolate graphical.target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Start the GUI on boot&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;set&lt;/span&gt;-default graphical.target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看 display manager&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ls -l /etc/systemd/system/display-manager.service&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 切换 display manager&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl &lt;span class=&quot;built_in&quot;&gt;disable&lt;/span&gt; gdm &amp;amp;&amp;amp; systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; lightdm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 刷新 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;systemctl isolate graphical.target&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;设置自动登陆&quot;&gt;2. 设置自动登陆 &lt;/h1&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果是 gdm，使用 gdm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vi /etc/lightdm/lightdm.conf &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[SeatDefaults]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;autologin-guest=&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;autologin-user=&lt;span class=&quot;built_in&quot;&gt;test&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;autologin-user-timeout=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;autologin-session=lightdm-autologin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;user-session=ubuntu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;greeter-session=unity-greeter&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;ubuntu- 安装 -xfce&quot;&gt;3. Ubuntu 安装 Xfce&lt;/h1&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;apt install xfce4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;安装 -vnc-server&quot;&gt;4. 安装 vnc server&lt;/h1&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 安装 Xfce 要使用 vncserver，需修改 /root/.vnc/xstartup 里为 exec /bin/sh /etc/xdg/xfce4/xinitrc 即可 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install vnc-server vnc* （CentOS 5.x 里）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install tigervnc-server tigervnc （CentOS 6.x 里）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/etc/init.d/vncserver restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 关闭具体的 vncserver 命令 :&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vncserver -&lt;span class=&quot;built_in&quot;&gt;kill&lt;/span&gt; :1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;http://jensd.be/125/linux/rhel/install-mate-or-xfce-on-centos-7&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="xorg" scheme="http://blog.dongcj.com/tags/xorg/"/>
    
      <category term="smate" scheme="http://blog.dongcj.com/tags/smate/"/>
    
      <category term="xfce" scheme="http://blog.dongcj.com/tags/xfce/"/>
    
      <category term="vnc" scheme="http://blog.dongcj.com/tags/vnc/"/>
    
  </entry>
  
  <entry>
    <title>使用 Printf 进行格式化</title>
    <link href="http://blog.dongcj.com/linux/%E4%BD%BF%E7%94%A8printf%E8%BF%9B%E8%A1%8C%E6%A0%BC%E5%BC%8F%E5%8C%96/"/>
    <id>http://blog.dongcj.com/linux/使用printf进行格式化/</id>
    <published>2016-08-30T09:27:43.000Z</published>
    <updated>2016-08-30T09:48:08.000Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;表格输出&quot;&gt;1. 表格输出 &lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;divider===============================&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;divider=&lt;span class=&quot;variable&quot;&gt;$divider&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$divider&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;header=&lt;span class=&quot;string&quot;&gt;&quot;\n %-10s %8s %10s %11s\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;format=&lt;span class=&quot;string&quot;&gt;&quot;%-10s %08d %10s %11.2f\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;width=43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$header&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;ITEM NAME&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;ITEM ID&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;COLOR&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;PRICE&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;%&lt;span class=&quot;variable&quot;&gt;$width&lt;/span&gt;.&lt;span class=&quot;variable&quot;&gt;$&amp;#123;width&amp;#125;&lt;/span&gt;s\n&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$divider&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$format&lt;/span&gt;&quot;&lt;/span&gt; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Triangle 13  red 20 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Oval 204449 &lt;span class=&quot;string&quot;&gt;&quot;dark blue&quot;&lt;/span&gt; 65.656 \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Square 3145 orange .7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;格式化&quot;&gt;2. 格式化 &lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;%s\n&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;1&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;2&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;\n3&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\n3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;%b\n&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;1&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;2&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;\n3&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;%d\n&quot;&lt;/span&gt; 255 0xff 0377 3.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bash: &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;: 3.5: invalid number&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;%f\n&quot;&lt;/span&gt; 255 0xff 0377 3.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255.000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255.000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;377.000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3.500000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;%.1f\n&quot;&lt;/span&gt; 255 0xff 0377 3.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;377.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3.5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;格式化 -1&quot;&gt;3. 格式化 &lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; $(seq 1 10); &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;%03d\t&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;&quot;&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;001     002     003     004     005     006     007     008     009     010&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="shell" scheme="http://blog.dongcj.com/tags/shell/"/>
    
      <category term="printf" scheme="http://blog.dongcj.com/tags/printf/"/>
    
  </entry>
  
  <entry>
    <title>Linux 升级 Kernel 及 tcp_BBR</title>
    <link href="http://blog.dongcj.com/linux/Linux%E5%8D%87%E7%BA%A7kernel%E5%8F%8A%E9%85%8D%E7%BD%AEtcp_BBR%E3%80%81TFO%E3%80%81Hybla/"/>
    <id>http://blog.dongcj.com/linux/Linux升级kernel及配置tcp_BBR、TFO、Hybla/</id>
    <published>2016-08-28T09:44:33.000Z</published>
    <updated>2016-06-07T06:25:00.000Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;开启 -bbr&quot;&gt;1. 开启 BBR&lt;/h1&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 先查看内核是否大于 4.9，如大于 4.9&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;net.core.default_qdisc=fq&quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sysctl.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;net.ipv4.tcp_congestion_control=bbr&quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sysctl.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 打开 TFO(tcp fast open), 服务端为 3，客户端为 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;net.ipv4.tcp_fastopen = 3&quot;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sysctl.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 保存生效 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sysctl -p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看 bbr 是否生效 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lsmod | grep bbr&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;开启高级算法 -hybla&quot;&gt;2. 开启高级算法 hybla&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt; 注意：此步骤不适用于 OpenVZ 或低版本内核，否则在执行最后一个步骤 sysctl -p 的时候会大量报错，如果没报错说明内核支持高级算法 hybla 等参数调整。 注意：该算法和 BBR 同属于集成于内核中的模块，当两者同时开启后，&lt;code&gt;BBR 优先级最高 &lt;/code&gt;。所以开启 BBR 后再开这个没用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;fs.file-max = 51200&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.core.rmem_max = 67108864&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.core.wmem_max = 67108864&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.core.netdev_max_backlog = 250000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.core.somaxconn = 4096&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_syncookies = 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_tw_reuse = 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_tw_recycle = 0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_fin_timeout = 30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_keepalive_time = 1200&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.ip_local_port_range = 10000 65000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_max_syn_backlog = 8192&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_max_tw_buckets = 5000&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_fastopen = 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_mem = 25600 51200 102400&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_rmem = 4096 87380 67108864&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_wmem = 4096 65536 67108864&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_mtu_probing = 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_congestion_control = hybla&#39;&lt;/span&gt; &amp;gt;&amp;gt; /etc/sysctl.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;debianubuntu- 升级内核&quot;&gt;3. Debian、Ubuntu 升级内核 &lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 直接使用 apt-get 安装内核 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt-cache search linux-image-extra&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 安装最新的内核 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt-get install linux-image-extra-&amp;lt;NEWEST_KERNEL_RELEASE&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dpkg -l | grep linux-image&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 删除旧内核 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt-get remove &amp;lt;OLD_KERNEL_RELEASE&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;update-grub&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;apt autoremove&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reboot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看一下目前的内核版本 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 应该是显示为 &amp;lt;NEWEST_KERNEL_RELEASE&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;uname -r&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;rhelcentos- 升级内核&quot;&gt;4. RHEL、CentOS 升级内核 &lt;/h1&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum update -y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果是 el7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果是 el6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rpm -Uvh http://www.elrepo.org/elrepo-release-6-8.el6.elrepo.noarch.rpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 安装内核 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum --enablerepo=elrepo-kernel install kernel-ml&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 查看当前已安装的内核 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;awk -F\&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;$1&lt;/span&gt;==&lt;span class=&quot;string&quot;&gt;&quot;menuentry &quot;&lt;/span&gt; &amp;#123;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt; i++ &lt;span class=&quot;string&quot;&gt;&quot; : &quot;&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$2&lt;/span&gt;&amp;#125;&lt;span class=&quot;string&quot;&gt;&#39; /etc/grub2.cfg&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;# 设定默认内核 (centos7)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;grub2-set-default 0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;reboot&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;# 设定默认内核 (centos6)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;vi /etc/grub.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;# 修改 default=&amp;lt;ID 号 &amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;# 设定 /etc/sysctl.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.core.default_qdisc = fq&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;net.ipv4.tcp_congestion_control = bbr&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;# 生效 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;sysctl -p&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="升级内核" scheme="http://blog.dongcj.com/tags/%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/"/>
    
      <category term="kernel" scheme="http://blog.dongcj.com/tags/kernel/"/>
    
      <category term="bbr" scheme="http://blog.dongcj.com/tags/bbr/"/>
    
      <category term="tcp_bbr" scheme="http://blog.dongcj.com/tags/tcp-bbr/"/>
    
  </entry>
  
  <entry>
    <title>Puppet 安装</title>
    <link href="http://blog.dongcj.com/linux/Puppet%E5%AE%89%E8%A3%85/"/>
    <id>http://blog.dongcj.com/linux/Puppet安装/</id>
    <published>2016-08-11T07:43:19.000Z</published>
    <updated>2016-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;etchosts- 可以 -ping- 通对方域名&quot;&gt;/etc/hosts 可以 ping 通对方域名 &lt;/h3&gt;
&lt;h3 id=&quot;安装 -puppet&quot;&gt; 安装 puppet&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;$ yum install ruby ruby-libs ruby-rdoc
$ wget http://yum.puppetlabs.com/el/6/products/x86_64/puppetlabs-release-6-10.noarch.rpm  ( 这个版本可以修改为最新的）
$ yum update

# 服务端安装 puppet-server
$ yum install puppet-server

# 服务端安装 puppet 图形界面（可选）
$ yum install ruby-mysql mysql  mod_passenger puppet-dashboard

# 客户端安装 puppet
$ yum install puppet&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;service-puppetmaster-start&quot;&gt;service puppetmaster start&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;$ puppet master --verbose --no-daemonize --cert_name &amp;quot;Puppet CA: `hostname -f`&amp;quot;

$ openssl x509 -text -noout -in /var/lib/puppet/ssl/certs/ca.pem

$ cat &amp;gt; /etc/puppet/autosign.conf &amp;lt;&amp;lt;EOF
*.xxx.com
EOF

$ service puppetmaster restart
$ puppet cert list --all    --&amp;gt; 查看下证书，此时是没有客户机的，只有自己

在 /etc/puppet/puppet.conf 中添加 server = bigdata.xxxx.com 一行，为了方便命令都可以不用 --server bigdata.xxxx.com

$ puppetd --server bigdata.xxxx.com --test
或者
$ puppet agent --no-daemonize --onetime --verbose --debug&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;安装 -dashboard&quot;&gt; 安装 dashboard&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;$ vi /usr/share/puppet-dashboard/config/database.yml
production:
database: puppet
username: root
password: passw0rd
encoding: utf8
adapter: mysql

$ vi /usr/share/puppet-dashboard/config/environment.rb
config.time_zone = &amp;#39;Beijing&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;初始化数据库&quot;&gt; 初始化数据库 &lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;$ cd /usr/share/puppet-dashboard/
rake RAILS_ENV=production db:migrate&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;整合 -passenger- 和 -apache&quot;&gt; 整合 Passenger 和 apache&lt;/h3&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="puppet" scheme="http://blog.dongcj.com/tags/puppet/"/>
    
      <category term="devops" scheme="http://blog.dongcj.com/tags/devops/"/>
    
  </entry>
  
  <entry>
    <title>硬 Raid(megacli) 与软 Raid (Mdadm) 创建</title>
    <link href="http://blog.dongcj.com/linux/%E7%A1%AC%20raid(megacli)%20%E4%B8%8E%E8%BD%AF%20raid%20(mdadm)%E5%88%9B%E5%BB%BA/"/>
    <id>http://blog.dongcj.com/linux/硬 raid(megacli) 与软 raid (mdadm)创建/</id>
    <published>2016-08-11T07:43:19.000Z</published>
    <updated>2016-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;建议：&lt;/strong&gt; 如果 raid0，1，raid1+0 可以使用软 raid, raid10 及以上不建议使用软 raid ！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;mega- 管理硬 -raid&quot;&gt;1. mega 管理硬 raid&lt;/h1&gt;
&lt;h2 id=&quot;查看磁盘状态&quot;&gt;1.1. 查看磁盘状态&lt;/h2&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 简略信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megasasctl &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0       PERC H710 Mini           encl:1 ldrv:1  batt:FAULT, low voltage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0d0      1862GiB RAID 0   1x1  optimal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  unconfigured:  a0e32s1   a0e32s2   a0e32s3 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s0    1863GiB  a0d0  online  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s1    1863GiB        ready   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s2    1863GiB        ready   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s3    1863GiB        ready   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 或者&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megaraidsas-status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -- Arrays informations --&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -- ID | Type | Size | Status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0d0 | RAID 0 | 1862GiB | optimal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -- Disks informations&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -- ID | Model | Status | Warnings&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s0 | SEAGATE ST2000NM0023 1863GiB | online&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s1 | SEAGATE ST2000NM0023 | ready&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s2 | SEAGATE ST2000NM0023 | ready&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  a0e32s3 | SEAGATE ST2000NM0023 | ready&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 详细物理磁盘 (pd) 信息，主要是看 ` 框 ID` 与 ` 插槽 ID`&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -PDlist -a0 | grep -e &lt;span class=&quot;string&quot;&gt;&#39;^Enclosure Device ID:&#39;&lt;/span&gt; -e &lt;span class=&quot;string&quot;&gt;&#39;^Slot Number:&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter &lt;span class=&quot;comment&quot;&gt;#0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure Device ID: 32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Slot Number: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure position: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure Device ID: 32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Slot Number: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure position: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure Device ID: 32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Slot Number: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure position: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure Device ID: 32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Slot Number: 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure position: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------------------------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 其它输出详细信息可以看看，平时可以通过这个来检查磁盘型号、状态等信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter &lt;span class=&quot;comment&quot;&gt;#0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure Device ID: 32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Slot Number: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Drive s position: DiskGroup: 0, Span: 0, Arm: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Enclosure position: 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Device Id: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  WWN: 5000C500627EE690&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Sequence Number: 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Media Error Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Other Error Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Predictive Failure Count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Last Predictive Failure Event Seq Number: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PD Type: SAS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Raw Size: 1.819 TB [0xe8e088b0 Sectors]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Non Coerced Size: 1.818 TB [0xe8d088b0 Sectors]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Coerced Size: 1.818 TB [0xe8d00000 Sectors]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Sector Size:  0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Firmware state: Online, Spun Up                &lt;span class=&quot;comment&quot;&gt;# &amp;lt;----- 如果重建，这里显示为：rebuilding&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Device Firmware Level: GS0F&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Shield Counter: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Successful diagnostics completion on :  N/A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  SAS Address(0): 0x5000c500627ee691&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  SAS Address(1): 0x0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Connected Port Number: 0(path0) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Inquiry Data: SEAGATE ST2000NM0023    GS0FZ1X39XH6            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  FDE Capable: Not Capable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  FDE Enable: Disable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Secured: Unsecured&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Locked: Unlocked&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Needs EKM Attention: No&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Foreign State: None &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Device Speed: 6.0Gb/s &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Link Speed: 6.0Gb/s &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Media Type: Hard Disk Device&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Drive Temperature :37C (98.60 F)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PI Eligibility:  No &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Drive is formatted &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; PI information:  No&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PI: No PI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Port-0 :&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Port status: Active&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Port&lt;span class=&quot;string&quot;&gt;&#39;s Linkspeed: 6.0Gb/s &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  Port-1 :&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  Port status: Active&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  Port&#39;&lt;/span&gt;s Linkspeed: Unknown &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Drive has flagged a S.M.A.R.T alert : No&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------------------------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 如果状态为重建中，可以查看重建信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -PDRbld -ShowProg -PhysDrv [32:1] -aALL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Rebuild Progress on Device at Enclosure 32, Slot 1 Completed 51% &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; 10 Minutes.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 逻辑磁盘 (LD) 信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli  -LDInfo -Lall -aALL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 0 -- Virtual Drive Information:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Virtual Drive: 0 (Target Id: 0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Name                :&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  RAID Level          : Primary-0, Secondary-0, RAID Level Qualifier-0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Size                : 1.818 TB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Sector Size         : 512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Parity Size         : 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  State               : Optimal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Strip Size          : 64 KB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Number Of Drives    : 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Span Depth          : 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Default Cache Policy: WriteBack, ReadAdaptive, Direct, No Write Cache if Bad BBU&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Current Cache Policy: WriteBack, ReadAdaptive, Direct, No Write Cache if Bad BBU&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Default Access Policy: Read/Write&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Current Access Policy: Read/Write&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Disk Cache Policy   : Disk&amp;apos;s Default&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Encryption Type     : None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Default Power Savings Policy: Controller Defined&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Current Power Savings Policy: None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Can spin up in 1 minute: Yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  LD has drives that support T10 power conditions: Yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  LD&amp;apos;s IO profile supports MAX power savings with cached writes: No&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Bad Blocks Exist: No&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Is VD Cached: Yes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Cache Cade Type : Read Only&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------------------------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Display, disable or enable automatic rebuild on adapter 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Display&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -AdpAutoRbld -Dsply -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 0: AutoRebuild is Enabled.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Exit Code: 0x00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# disable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -AdpAutoRbld -Dsbl -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 0: AutoRebuild is Disabled.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Exit Code: 0x00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# enable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -AdpAutoRbld -Enbl -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 0: AutoRebuild is Enabled.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Exit Code: 0x00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;------------------------------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Get and modify rebuild rate:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# get&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -AdpGetProp RebuildRate -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 0: Rebuild Rate = 30%&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Exit Code: 0x00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# set&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -AdpSetProp RebuildRate 60 -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 0: Set rebuild rate to 60% success.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Exit Code: 0x00&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;create-a-raid0156-array-with-megacli&quot;&gt;1.2. Create a RAID0,1,5,6 array with MegaCli&lt;/h2&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 将后面三块盘创建 raid0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megacli -CfgLdAdd -r0[32:1,32:2,32:3] -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 1: Created VD 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Adapter 1: Configured the Adapter!!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Exit Code: 0x00&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Note:    to make RAID0, minimal 2 drives are required.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#          to make RAID1, minimal 2 drives are required.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#          to make RAID5, minimal 3 drives are required.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#          to make RAID6, minimal 4 drives are required.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;create-a-raid50raid60-array-with-megacli&quot;&gt;1.3. Create a RAID50,raid60 array with MegaCli&lt;/h2&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;megactl -CfgLdAdd -r50 raid0[252:2,252:3,252:4] raid1[252:5,252:6,252:7] -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;megactl -CfgLdAdd -r60 raid0[252:2,252:3,252:4,252:5] raid1[252:6,252:7,252:8,252,9] -a0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Note: to make RAID50, minimal 6 drives are required.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#       to make RAID60, minimal 8 drives are required.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="soft raid" scheme="http://blog.dongcj.com/tags/soft-raid/"/>
    
      <category term="mdadm" scheme="http://blog.dongcj.com/tags/mdadm/"/>
    
  </entry>
  
  <entry>
    <title>Curl、resty、httpie、httpstat、wuzz 使用介绍</title>
    <link href="http://blog.dongcj.com/linux/Curl%E3%80%81resty%E3%80%81httpie%E3%80%81httpstat%E3%80%81wuzz%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D/"/>
    <id>http://blog.dongcj.com/linux/Curl、resty、httpie、httpstat、wuzz使用介绍/</id>
    <published>2016-08-11T07:43:19.000Z</published>
    <updated>2016-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;curl&quot;&gt;1. curl&lt;/h1&gt;
&lt;h2 id=&quot;直接下载文件并压缩&quot;&gt;1.1. 直接下载文件并压缩 &lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; DOCKERIZE_VERION=latest &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; DOCKERIZE_ARCH=dockerize-linux-amd64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DOCKERIZE_DOWNLOADURL=$(curl -s https://api.github.com/repos/jwilder/dockerize/releases/&lt;span class=&quot;variable&quot;&gt;$&amp;#123;DOCKERIZE_VERION&amp;#125;&lt;/span&gt; | \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  jq -r &lt;span class=&quot;string&quot;&gt;&quot;.assets[] | select(.name | test(\&quot;&lt;span class=&quot;variable&quot;&gt;$&amp;#123;DOCKERIZE_ARCH&amp;#125;&lt;/span&gt;\&quot;)) | .browser_download_url&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -sSOL http://&lt;span class=&quot;variable&quot;&gt;$DOCKERIZE_DOWNLOADURL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# or &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -sSL &lt;span class=&quot;variable&quot;&gt;$&amp;#123;DOCKERIZE_DOWNLOADURL&amp;#125;&lt;/span&gt; | tar zxvf - -C &lt;span class=&quot;variable&quot;&gt;$&amp;#123;MODULE_HOME&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;详细信息&quot;&gt;1.2. 详细信息 &lt;/h2&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -v www.sina.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl --trace output.txt www.sina.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl --trace-ascii output.txt www.sina.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl  -s  --head  www.sina.com&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;上传文件与 -post&quot;&gt;1.3. 上传文件与 post&lt;/h2&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl --form upload=@localfilename --form press=OK [URL]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -iL --user admin:mogK+vXX --form upload=@proxy.conf http://69.172.89.60:8090/uploader&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl --cookie &lt;span class=&quot;string&quot;&gt;&quot;name=xxx&quot;&lt;/span&gt; www.example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl --user username:password http://example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl example.com/form.cgi?data=xxx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -fsSL ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;下载网页保存为文件名&quot;&gt;1.4. 下载网页保存为文件名 &lt;/h2&gt;
&lt;figure class=&quot;highlight sh&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -o [文件名] www.sina.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl -L www.sina.com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl --&lt;span class=&quot;built_in&quot;&gt;limit&lt;/span&gt;-rate 1000B -O http://www.gnu.org/software/gettext/manual/gettext.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl --insecure -LJO https://packages.gitlab.com/gitlab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;增加头信息 --h&quot;&gt;1.5. 增加头信息 (-H)&lt;/h2&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="curl" scheme="http://blog.dongcj.com/tags/curl/"/>
    
      <category term="resty" scheme="http://blog.dongcj.com/tags/resty/"/>
    
      <category term="httpie" scheme="http://blog.dongcj.com/tags/httpie/"/>
    
      <category term="httpstat" scheme="http://blog.dongcj.com/tags/httpstat/"/>
    
      <category term="wizz" scheme="http://blog.dongcj.com/tags/wizz/"/>
    
  </entry>
  
  <entry>
    <title>Gearman 安装</title>
    <link href="http://blog.dongcj.com/cluster/Gearman%E5%AE%89%E8%A3%85/"/>
    <id>http://blog.dongcj.com/cluster/Gearman安装/</id>
    <published>2016-08-11T07:43:19.000Z</published>
    <updated>2016-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; 参考 http://www.php-oa.com/2010/09/05/perl-gearman-distributed.html python gearman library home page http://samuelks.com/python-gearman/docs/ Tim Yang：利用 Gearman 来实现远程监控与管理 http://timyang.net/linux/gearman-monitor/ # 一、安装 grarmand 及 libgearman-devel $ yum install gearmand libgearman-devel php-pecl-gearman (直接安装这个 php-pecl-gearman 就不用第二步：安装 PHP 的 API 了) # 二、安装 PHP 的 API $ yum install php php-devel boost boost-devel libuuid libuuid-devel $ tar -xzf gearman-1.1.2.tgz # 下载地址：https://pecl.php.net/package/gearman $ cd gearman-1.1.2 $ phpize $ ./configure; make; make install // 实际上是给 PHP 增加了个 gearman 的 extension: /usr/lib64/php/modules/gearman.so # 增加 php 扩展 $ vi /etc/php.d/gearman.ini ; Enable gearman extension module extension=gearman.so # 三、启动 gearmand # (如果使用默认参数，需要开启 IPV6) # 可以设置成服务启动： $ vi /etc/sysconfig/gearmand OPTIONS=“-L 0.0.0.0 –verbose=DEBUG” –&amp;gt; 根据自己需求设置 –verbose $ service gearmand start $ gearmand -d –http-port 8090 -L 0.0.0.0 -p 4730 # 如果需要使用数据库 gearmand -d –http-port=8080 -L 0.0.0.0 -p 4730 –mysql-user=root –mysql-password=YOUR_PASS –mysql-db gearman $ gearman -w -f wc – wc -l // 开启一个 worker（-w）, 监听一个函数 wc(-f wc)， 函数的内容为 wc -l # 将 /etc/passwd 文件给函数 wc 进行处理 $ gearman -f wc &amp;lt; /etc/passwd $ gearadmin –show-jobs –status –workers – … ## 1. Worker: &lt;?php
$worker = new GearmanWorker();
$worker-&gt;addServer(); $worker-&amp;gt;addFunction(“reverse”, “reverse_fn”); while (1) {print “Waiting for job…”; $ret = &lt;span class=&quot;math inline&quot;&gt;\(worker-&amp;gt;work(); if(\)&lt;/span&gt;worker-&amp;gt;returnCode() != GEARMAN_SUCCESS) {break;} } function reverse_fn(GearmanJob $job) {$workload = $job-&amp;gt;workload(); echo “Received job:”. $job-&amp;gt;handle(). “”; echo “Workload: $workload”; &lt;span class=&quot;math inline&quot;&gt;\(result = strrev(\)&lt;/span&gt;workload); echo “Result: $result”; return $result; } ?&amp;gt; ## 2. client: &lt;?php
$client = new GearmanClient();
$client-&gt;addServer(); echo “sending job”; if($result) {echo “Success: $result”;} else {echo “Failed!”;} ?&amp;gt;&lt;/p&gt;
&lt;/blockquote&gt;

    
    </summary>
    
      <category term="cluster" scheme="http://blog.dongcj.com/categories/cluster/"/>
    
    
      <category term="gearman" scheme="http://blog.dongcj.com/tags/gearman/"/>
    
  </entry>
  
  <entry>
    <title>Graphite 安装</title>
    <link href="http://blog.dongcj.com/monitor/Graphite%E5%AE%89%E8%A3%85/"/>
    <id>http://blog.dongcj.com/monitor/Graphite安装/</id>
    <published>2016-08-11T07:43:19.000Z</published>
    <updated>2016-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; 参考： http://www.jsxubar.info/category/system-administration/graphite/ http://www.jsxubar.info/category/system-administration/page/3/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt; 更多集成 grafana 及 Diamond 请看： http://dongweiming.github.io/blog/archives/shi-yong-grafanahe-diamondgou-jian-graphitejian-kong-xi-tong/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;使用 -yum- 安装环境&quot;&gt; 使用 yum 安装环境 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;$ yum install bitmap bitmap-fonts Django pycairo python-devel python-ldap python-memcached mod_wsgi python-sqlite2 glibc-devel gcc gcc-c++ git openssl-devel python-zope-interface httpd memcached python-hashlib  django-tagging python-twisted python-simplejson httpd mod_wsgi

# 其它的使得 pip 安装就可以
$ pip install whisper
$ pip install carbon
$ pip install graphite-web&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;安装并升级为最新的 -zope.interface- 及 -twisted&quot;&gt; 安装并升级为最新的 zope.interface 及 twisted&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;# (确保这个版本要到 3.6.0 以上，如果不行，下载安装) 及 twisted
$ wget https://pypi.python.org/simple/zope.interface/zope.interface-4.1.2-py2.6-win-amd64.egg
$ easy_install zope.interface-4.1.2-py2.6-win-amd64.egg

# test twisted
[root@bigdata twisted]# python
Python 2.6.6 (r266:84292, Jan 22 2014, 09:42:36)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-4)] on linux2
Type &amp;quot;help&amp;quot;, &amp;quot;copyright&amp;quot;, &amp;quot;credits&amp;quot; or &amp;quot;license&amp;quot; for more information.
&amp;gt;&amp;gt;&amp;gt; from twisted.python.compat import _PY3
&amp;gt;&amp;gt;&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;check-for-missing-dependencies&quot;&gt;Check for missing dependencies&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;$ python /tmp/pip-build-me/graphite-web/check-dependencies.py&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;设置权限&quot;&gt; 设置权限 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;$ chown -R apache:apache /opt/graphite/storage/&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="monitor" scheme="http://blog.dongcj.com/categories/monitor/"/>
    
    
      <category term="graphite" scheme="http://blog.dongcj.com/tags/graphite/"/>
    
  </entry>
  
  <entry>
    <title>GlusterFS 安装</title>
    <link href="http://blog.dongcj.com/storage/GlusterFS%E5%AE%89%E8%A3%85/"/>
    <id>http://blog.dongcj.com/storage/GlusterFS安装/</id>
    <published>2016-08-11T07:43:19.000Z</published>
    <updated>2016-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt; 参考： https://wiki.centos.org/zh/HowTos/GlusterFSonCentOS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;$ wget -P /etc/yum.repos.d     http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/glusterfs-epel.repo&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;安装软件&quot;&gt; 安装软件 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;yum install glusterfs{,-fuse,-server}
yum install glusterfs-geo-replication.x86_64&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt; 如遇到以下错误： Transaction check error: file /usr/lib/systemd/system/blk-availability.service from install of device-mapper-7:1.02.107-5.el7_2.2.x86_64 conflicts with file from package lvm2-7:2.02.105-14.el7.x86_64 file /usr/sbin/blkdeactivate from install of device-mapper-7:1.02.107-5.el7_2.2.x86_64 conflicts with file from package lvm2-7:2.02.105-14.el7.x86_64 file /usr/share/man/man8/blkdeactivate.8.gz from install of device-mapper-7:1.02.107-5.el7_2.2.x86_64 conflicts with file from package lvm2-7:2.02.105-14.el7.x86_64&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;# 删除 lvm2
$ rpm -e lvm2&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;挂载分区及配置防火墙&quot;&gt; 挂载分区及配置防火墙 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;# mkdir
$ mkdir /export/brick1

# 这里可以修改权限 , 其它程序可以使用， 注意所有服务器上都要修改！！！
$ chmod 777 /export/brick1

# firewall
$ firewall-cmd --zone=public --add-port=24007-24008/tcp --permanent

$ firewall-cmd --zone=public --add-service=nfs --add-service=samba --add-service=samba-client --permanent
$ firewall-cmd --zone=public --add-port=111/tcp --add-port=139/tcp --add-port=445/tcp --add-port=965/tcp --add-port=2049/tcp \
--add-port=38465-38469/tcp --add-port=631/tcp --add-port=111/udp --add-port=963/udp --add-port=49152-49251/tcp  --permanent
$ firewall-cmd --reload&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;启动 -glusterd- 服务&quot;&gt; 启动 glusterd 服务 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;$ service glusterd start

# if centos7:
$ systemctl enable glusterd
$ systemctl start glusterd
$ systemctl status glusterd

# from server1
$ gluster peer probe SERVER2

# from server2
$ gluster peer probe SERVER1

# check peer
$ gluster peer status

$ gluster volume create gv0 replica 2 HOSTNAME_OF_SERVER1:/export/brick1/gv0 HOSTNAME_OF_SERVER2:/export/brick1/gv0
$ gluster volume start gv0

$ gluster volume info
$ gluster volume status

# How to remove a volume or peer
# stop Volume
$ gluster volume stop gv0

# delete Volume
$ gluster volume delete gv0

$ gluster peer detach NAME_OF_PEERNODE&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="storage" scheme="http://blog.dongcj.com/categories/storage/"/>
    
    
      <category term="gluster" scheme="http://blog.dongcj.com/tags/gluster/"/>
    
      <category term="dfs" scheme="http://blog.dongcj.com/tags/dfs/"/>
    
  </entry>
  
  <entry>
    <title>PXE 安装与设定</title>
    <link href="http://blog.dongcj.com/linux/PXE%E5%AE%89%E8%A3%85%E4%B8%8E%E8%AE%BE%E5%AE%9A/"/>
    <id>http://blog.dongcj.com/linux/PXE安装与设定/</id>
    <published>2016-08-11T07:43:19.000Z</published>
    <updated>2016-08-11T07:44:39.000Z</updated>
    
    <summary type="html">
    
      &lt;h1 id=&quot;安装软件&quot;&gt; 安装软件 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;# 安装的软件：
dhcp-3.0.5-7.el5.x86_64.rpm
vsftpd-2.0.5-10.el5.x86_64.rpm(不须装)
xinetd-2.3.14-10.el5.x86_64.rpm
tftp-server-0.42-3.1.x86_64.rpm
pykickstart-0.43.3-1.el5.noarch.rpm
system-config-kickstart-2.6.19.1-1.el5.noarch.rpm
syslinux

# 关闭 selinux &amp;amp; iptables&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;dhcp- 配置&quot;&gt;dhcp 配置 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;ddns-update-style interim;
ignore client-updates;
allow booting;
allow bootp;
class &amp;quot;pxeclients&amp;quot;{match if substring(option vendor-class-identifier,0,9) = &amp;quot;PXEClient&amp;quot;;
filename &amp;quot;/pxelinux.0&amp;quot;;
next-server 10.85.138.9;
}
subnet 10.85.138.0 netmask 255.255.254.0 {
option routers 10.85.138.1;
option subnet-mask 255.255.254.0;
option domain-name &amp;quot;gwcloud.com&amp;quot;;
option domain-name-servers 10.85.138.1;
option time-offset -18000; # Eastern Standard Time
range dynamic-bootp 10.85.138.100 10.85.138.249;
default-lease-time 21600;
max-lease-time 43200;
}&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;增加 -tftp- 文件&quot;&gt; 增加 tftp 文件 &lt;/h1&gt;
&lt;pre&gt;&lt;code&gt; 拷文件至 tftpboot(注：menu.c32 和 pxelinux.0 要从本机拷贝，否则 TIMEOUT 无效！)
$ cp /usr/share/syslinux/menu.c32 /var/lib/tftpboot/
$ cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/


$ cp /mnt/isolinux/initrd.img /var/lib/tftpboot/isolinux
$ cp /mnt/isolinux/vmlinuz /var/lib/tftpboot/isolinux
$ cp /mnt/isolinux/isolinux.cfg /tftpboot/pxelinux.cfg/default  # default 文件也可以自己修改 &lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&quot;配置 -kickstart&quot;&gt; 配置 kickstart&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;# 在 /tftpboot/pxelinux.cfg/default 中添加 KS 入口
  label linux
    menu label ^Install or upgrade an existing system
    menu default
    kernel vmlinuz
    append initrd=isolinux/initrd.img ks=ftp://10.85.138.9/pub/ks.cfg

# 修改 kickstart 自动安装 linux(见安装文件)&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt; 附录：完整 DHCP 样例 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;ddns-update-style interim;
ddns-updates on;
ignore client-updates;
allow booting;  # for pxe only
allow bootp;    # for pxe only
authoritative;  # Do not know what is meaning??

class &amp;quot;pxeclients&amp;quot;{match if substring(option vendor-class-identifier,0,9) = &amp;quot;PXEClient&amp;quot;;   # for pxe
    # match if substring(option vendor-class-identifier, 0, 4) = &amp;quot;MSFT&amp;quot;;    # for normal dhcp
    # option host-name = config-option server.ddns-hostname;    # set the server&amp;#39;s hostname, only for linux???
    ddns-hostname = concat(&amp;quot;v&amp;quot;,
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 1, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 2, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 3, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 4, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 5, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 6, 1))), 2)
    );
    filename &amp;quot;/pxelinux.0&amp;quot;;     # for pxe only
    next-server 192.168.88.1;   # for pxe only
}


class &amp;quot;MSFT&amp;quot; {match if substring(option vendor-class-identifier, 0, 4) = &amp;quot;MSFT&amp;quot;;
    option host-name = config-option server.ddns-hostname;
    #ddns-hostname = concat(&amp;quot;v&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 1, 6)));
    #ddns-hostname = pick (option host-name, concat(&amp;quot;v&amp;quot;,    # Windows instances will apply for a hostname by default
    ddns-hostname = concat(&amp;quot;v&amp;quot;,
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 1, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 2, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 3, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 4, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 5, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 6, 1))), 2)
    );
}


option host-name = config-option server.ddns-hostname;
ddns-hostname = pick (option host-name, concat(&amp;quot;v&amp;quot;,
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 1, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 2, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 3, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 4, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 5, 1))), 2),
        suffix(concat(&amp;quot;0&amp;quot;, binary-to-ascii(16, 8, &amp;quot;&amp;quot;, substring (hardware, 6, 1))), 2)
));
set vendor-string = option vendor-class-identifier;


subnet 192.168.88.0 netmask 255.255.255.0 {
    option routers 192.168.88.1;
    option subnet-mask 255.255.255.0;
    option domain-name &amp;quot;gwcloud.cn&amp;quot;;
    option domain-name-servers 192.168.88.1;
    # option host-name &amp;quot;Server001&amp;quot;      # set the server&amp;#39;s hostname, only for linux???
    # option ntp-servers 192.168.88.1   # set the ntp server
    option time-offset -18000;          # Eastern Standard Time
    range dynamic-bootp 192.168.88.100 192.168.88.200;
    default-lease-time 21600;
    max-lease-time 43200;

    # the next is bonding the mac to static ip address
    # host pc1 {
    #    hardware ethernet 00:a0:cc:cf:9C:14;    # host&amp;#39;s mac address
    #    fixed-address 192.168.1.30;             # host&amp;#39;s ip address
}&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="linux" scheme="http://blog.dongcj.com/categories/linux/"/>
    
    
      <category term="dhcp" scheme="http://blog.dongcj.com/tags/dhcp/"/>
    
      <category term="pxe" scheme="http://blog.dongcj.com/tags/pxe/"/>
    
      <category term="kickstart" scheme="http://blog.dongcj.com/tags/kickstart/"/>
    
  </entry>
  
</feed>
